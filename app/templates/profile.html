{% extends 'base.html' %}


{% block body %}
<div style="margin-top: 80px;" class="w3-center">
    <br>
    <h2>Your embedable code is</h2>
    <div>
        <code id="code" contenteditable>
        
        </code>
    </div>
    <br>
    <div class="w3-center w3-padding w3-round">
        <button id="copy" style="width: 150px; font-size: x-large; background-color: transparent; outline: none; border: none;"><i class="bi bi-clipboard2"></i></button>
    </div>

    <p>
        <span style="font-weight: 800;">Note: </span> Edit the above code to your likeness. View the sample below <i class="bi bi-arrow-down-square-fill"></i>  
    </p>
    <br><br>
    <div class="w3-padding w3-round" style="width: 150px; margin: 0 auto; background-color: var(--maverick); cursor: pointer;">
        Click for demo
    </div>
</div>

<script>
    const code = document.getElementById('code');
    code.innerText = `
    <iframe src="http://${location.host}/dashboard/chat/{{ current_user.auth_id }}" frameborder="0"></iframe>`

    const copy = document.getElementById('copy');
    copy.onmouseover = () => {
        copy.style.backgroundColor = 'var(--eucalyptus)';
    }

    copy.onmouseleave = () => {
        copy.style.backgroundColor = 'transparent';
    }

    copy.onclick = () => {

        navigator.clipboard.writeText(code.innerText).then(() => {
            copy.innerHTML = '<i class="bi bi-check2"></i>';
            copy.style.backgroundColor = 'var(--eucalyptus)';
            copy.style.color = '#ffffff';
            copy.style.fontWeight = '800';

            setTimeout(() => {
                copy.innerHTML = '<i class="bi bi-clipboard2">';
                copy.style.color = '#333'
            }, 1000);
        })
        .catch((error) => {
            alert(error);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
        })

    }
</script>

{% endblock %}